
import {spawnSync} from 'child_process';
import { resolve } from 'path';
import fs from "fs";

function main () {

	const zips = fs.readdirSync("./zips")

	for(const zip of zips) {
		try{
			const outputDir = resolve("./unpacked/" + zip.split(".")[0])
			const zipFile = resolve("./zips/" + zip)
			fs.mkdirSync(outputDir);
			const result = spawnSync('WinRAR', ["x", `${zipFile}`, "*.js", `${outputDir}`, "-inul"])

			if(result.status !== 0) {
				console.log("status: " + result.status + "; id: " + outputDir)
			}
		}
		catch(e) {
			fs.appendFileSync("extractErrors.txt", zip + ": " + e + "\n")
		}
	}

}

main()